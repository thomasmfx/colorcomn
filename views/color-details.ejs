<!DOCTYPE html>
<html>
    <%- include('partials/head') %>
    <link rel="stylesheet" href="/css/pages/color-details.css">
    <link rel="stylesheet" href="/css/pages/palettes.css">
    <script src="/js/color-details.js" type="module" defer></script>
<body>
    <%- include('partials/header', { currentRoute: 'colors' }) %>
    <main class="main">
        <div class="color-details">
            <button class="color-details__color" style="background-color: <%= color.code %>">
                <span class="color-details__code"><%= color.code.split('').splice(1, 6).join('') %></span>
            </button>
            <div class="color-details__wrapper">
                <h2 class="color-details__name"><%= color.name %></h2>
                <ul class="color-details__tags">
                    <% color.tags.map((tag) => {%>
                        <li class="tags__item">
                            <a href="/tags/<%= tag.id %>" class="tags__item-link pill-style"> <%= tag.name %> </a>
                        </li>
                    <% }) %>
                </ul>
                <span class="color-details__created-at">Shared: <%= getRelativeDate(color.created_at) %></span>
                <div class="color-details__actions">
                    <button class="color-details__action-btn color-details__action-btn--delete">Delete</button>
                    <button class="color-details__action-btn color-details__action-btn--edit">Edit</button>
                </div>
            </div>
        </div>
    </main>
    <section class="palettes">
        <h3 class="palettes__title">Palettes</h3>
        <% if (locals.color.palettes.length) { %>
            <ul class="palettes-list">
                <% color.palettes.forEach((palette) => { %>
                    <li class="palettes-list__item">
                        <a href="/palettes/<%= palette.id %>" class="palette-link">
                            <ul class="palette-colors-list">
                                <% palette.colors.forEach((color) => { %>
                                    <li
                                            class="palette-colors-list__item"
                                            style="background-color: <%= color.code %>"
                                            data-position="<%= color.position %>"
                                    >
                                    </li>
                                <% }) %>
                            </ul>
                        </a>
                    </li>
                <% }) %>
            </ul>
        <% } else { %>
            <div class="palettes__not-found">
                <span class="palettes__not-found-text">No palettes were found. Be the first one to share a palette with this color!</span>
                <a href="/share/palette" class="palettes__not-found-link">
                    Share palette
                </a>
            </div>
        <% } %>
    </section>
</body>
</html>